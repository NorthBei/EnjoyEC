@require "../../../node_modules/kouto-swiss"
@require "../general"

$nav_btns_margin = 13.2%
$search_component_height = 20px
$nav_btns_wrapper_height = 45px
$nav_scrolled_height = 45px
$dropdown_triangle_height = 7px
$header_rwd_height = 67px
/*function defined*/
fixed_header()
    position: fixed;
    width: 100%;
    z-index: 20;
    background: #FFF8F6
    display: flex;
    // flex-wrap: wrap
    box-shadow: 0 2px 2px 0 rgba(97,97,97,0.22);
    //transform: translateY(-($nav_scrolled_height));
    flex-axis:center


    .nav_btns_wrapper
        color: #D5948E
    .nav_list_wrapper
        flex-direction: row;
        height: 45px;
        padding-bottom: 0;
        max-width: $banner_max_width
        width: 100%;
        justify-content: space-between;

    #logo_img
        width: 125px;
        height: 30px;
        
    .nav_btns_wrapper
        display: flex;
        line-height: $nav_scrolled_height;

    .nav_btns
        position: static;
    
    .child_category_wrapper
        margin-top: 29px
    .scroll_disappear
        display: none

rwd_header()
    //.parent_category_list,.nav_btns .fa-heart
    .rwd_disapper,.nav_btns .fa-heart
            display: none

    .nav_list_wrapper
        height: $header_rwd_height
        padding: 10px 15px;
        box-sizing: border-box;
/*function defined*/
header
    position: relative;

.space_block
    background: #D5948E
    height: $nav_btns_wrapper_height

.nav_btns_wrapper
    color: white

.nav_btns
    position: absolute
    top: 12px
    
    &.left
        left: $nav_btns_margin
    
    &.right
        right: $nav_btns_margin

    >a,.dropdown_block_wrapper
        &:hover
            color: #8E5651

    .dropdown_block_wrapper
        display: inline-flex
        flex-direction: column
        flex-axis: center center
    
    .fa,i
        margin: 0 5px
        font-style: normal
        font-size: 18px
        cursor: pointer

    .fa-user-circle-o
        margin-bottom: 1px
    
    .small_icon
        font-size: 16px

.dropdown_block_wrapper>.fa
    padding-bottom: 16px;

#search_button+.dropdown_block
    min-width: 205px;

.dropdown_block
    background: white
    display: flex
    flex-axis: center center
    padding: 0 10px
    box-sizing: border-box
    box-shadow: 0 2px 4px 0 #F0E1DB
    position: absolute
    white-space: nowrap
    margin-top: 34px
    height: 40px
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px)
    transition: visibility 0.15s linear, opacity 0.3s ease, transform 0.3s ease;
    //show_dropdown_animation(".dropdown_block_wrapper>i:hover + &")

    >li
        margin: 0 10px
        color: #8B572A
        line-height: 40px
        cursor: pointer
        &:hover
            color: #D6645F 
    &:before
        content: ''
        position: absolute
        top: 0
        left: 50%
        transform: translateX(-50%) translateY(- $dropdown_triangle_height)
        topDownTriangle( $dropdown_triangle_height, 6px , #D5948E )
        border-top-width:0
        align-self: flex-start;

    .nav_btns.right &
        /*因為nav icon高度都不同，所以排列不整齊，導致margin會有些許差距需要特別設定*/
        margin-top: (34px + 2)

form.dropdown_block:after
    content: "";
    left: 10px;
    right: 10px;
    height: 1px;
    background: #d6645f;
    position: absolute;
    bottom: 10px;

#shopping_cart
    width: 396px;
    background: #fff;
    box-shadow: 0 1px 2px 0 rgba(97,97,97,0.7);
    color: #8e5651;
    font-size: 12px;
    padding: 0 24px;
    padding-bottom: 30px;
    box-sizing: border-box;
    //height: initial;//not compat IE11
    height: inherit;
    top: -3px;
    z-index: 10;
    display: flex;
    flex-direction: column;
    line-height: normal
    max-height: 600px;
    overflow-y: auto;
    justify-content: flex-start;
    &:before
        display: none
    &>div
        width: 100%
        
    .shopping_cart_product
        display: flex
        align-items: center
        justify-content: space-between;
        padding: 25px 5px;
        width: 100%
        min-height: 82px
        border-bottom: 1px solid #C3C2C3
        box-sizing: border-box
        
        .remove_product
            size : 13px
            margin-right: 30px;
            cursor: pointer

    .shopping_cart_product_info_wrapper
        flex: 1
        display: flex
        flex-direction: column

        .shopping_cart_product_name
            white-space: normal
            letter-spacing: 0.31px;
            
        .number
            margin-left: 25px
        
        .shopping_cart_product_info
            display: flex
            margin: 10px 0;
            color: #8e5651;
            font-size: 12px;

    .product_img
        height:82px
        width: 71px;
        margin-left: 39px
    
    
    .shopping_cart_calc
        min-height: 40px
        padding: 10px 0
        padding-left: 43px
        box-sizing: border-box
        border-bottom: 1px solid #C3C2C3
        display: flex;
        align-items: center;
        width: 100%
        .calc_num
            margin-left: 96px
    
    .go_to_pay
        width: 100%
        height: 45px
        text-align: center
        line-height: 45px
        font-size: 15px
        color: white
        background: #D5948E
        margin-top: 15px
    
.scroll_header
    #shopping_cart
        top: 9px;
        right: 0;

.dropdown_will_attach_right
    #shopping_cart
        position: fixed;
        right: 0;
        top: 9px;
    
    #member_panel
        position: fixed;
        right: 0;
        top: 43px;

#bars
    width: 18px;
.bars_rwd
    display: none
    
#search_input
    //border-bottom: 1px solid #D6645F
    height: ($search_component_height - 3)
    flex: 1;

    //&::placeholder
    +placeholder()
        color: #D6645F

#search_go
    size: 45px $search_component_height
    line-height: $search_component_height
    background: #D6645F
    //border: 1px solid #D6645F
    color: white
    cursor: pointer
    box-sizing: border-box
    border-radius: 0
    padding: 0;
    
    &:active
        background: white
        color: #D6645F

.nav_list_wrapper
    background: #FFF8F6
    display: flex
    flex-direction: column
    flex-axis: center center
    font-size: 13px
    color: #8B572A
    //padding-bottom: 10px

#logo_img
    height: 47px
    width: 168px
    margin: 20px 0
       
.parent_category_list
    display: flex

    >li
        margin: 0 30px
        cursor: pointer
        display: flex
        flex-direction: column
        position: relative

        &:hover
            color: #D6645F
            
.parent_category
    padding-bottom: 10px

.child_category_wrapper
    color: #8E5651
    display: flex
    background: white
    max-height: 220px
    padding: 17px 20px
    box-sizing: border-box
    box-shadow: 0 1px 2px 0 rgba(97,97,97,0.70)
    position: absolute
    top: 0
    left: -40px
    min-width: 475px
    z-index: 10
    margin-top: 24px
    white-space: nowrap
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px)
    transition: visibility 0.15s linear, opacity 0.3s ease, transform 0.3s ease;
    /*show*/
    //show_dropdown_animation(".parent_category_list>li:hover  &")
    
    .child_category_list
        padding-left: 10px
        padding-right: 40px
        position: relative
        background: white

        >li
            padding: 8px 0
            //width: 230px
            white-space: normal


            &:hover
                color: #D6645F
    img
        height: 170px
        margin-left: auto

.dropdown_block_active
    visibility: visible;
    opacity: 1;
    transform: translateY(0px);

    &:before
        border-top-width: 7px
        transform: translateY(0)
        transition: transform 0.15s linear 0.3s,border-top-width 0.15s linear 0.3s

.more_option
    min-height: 220px
    //max-height: initial;//not compat IE11
    max-height: inherit
    
    .first_layer_triangle
            position: absolute;
            top: 12px;
            left: 90px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 3px 0 3px 5px;
            border-color: transparent transparent transparent #d6655f;
            transition: top 0.4s ease-in-out;

    .child_category_list
        //fix width to fill out the space of child_category
        width: 230px;

        &:before
            content: "";
            position: absolute;
            width: 1px;
            height: 100%;
            background: #D5948E;
            left: 90px;

        >li

            &:hover > .more_option_child_wrapper
                visibility: visible;
                padding: 0px 20px;
            &:hover > .more_option_child_wrapper>li
                transform: translateX(0);

.more_option_child_wrapper
    position: absolute;
    top: 0;
    left: 90px;
    list-style: none;
    height: 100%;
    //border-left: 1px solid #D5948E;
    padding: 0px 20px;
    overflow: hidden;
    visibility: hidden;
    padding: 0;
    
    &:hover > li
        transform: translateX(0);

    >li
        color:#8B572A
        padding: 8px 0
        transform: translateX(-100%);
        transition: all 0.3s ease-in-out;

        &:hover
            color: #D6645F
        a
            cursor: pointer
    
    >li:nth-child(1)
        transition-delay:0s
    >li:nth-child(2)
        transition-delay:0.1s
    >li:nth-child(3)
        transition-delay:0.2s
    >li:nth-child(4)
        transition-delay:0.3s
    >li:nth-child(5)
        transition-delay:0.4s
    >li:nth-child(6)
        transition-delay:0.5s
    >li:nth-child(7)
        transition-delay:0.6s
    >li:nth-child(8)
        transition-delay:0.7s

.parent_category_list
    .child_will_attach
        //position: initial //not compat IE11
        position: static
.child_category_wrapper_attach_right
    right: 0;
    //left: initial;//not compat IE11
    left: auto
    top: inherit


.child_category_wrapper_attach_left
    left: 0;
    //right: initial;//not compat IE11
    right: auto

.rwd_show
    display: none
/*special request*/

//search icon min and move up 1px
.fa-search:before {
    position: relative;
    top: -1px;
    font-size: 15px
}


.mobile_menu
    position: fixed;
    top: 67px;
    left: 0px;
    width: 100%;
    background: white;
    box-shadow: 0 1px 0 0 rgba(0,0,0,0.26);
    padding: 20px
    color: #8B572A
    font-size: 14px
    box-sizing: border-box
    //display: flex;
    //display: none
    visibility: hidden
    opacity: 0
    transform: translateY(20px);
    transition: all 0.3s ease-in-out
    .first_layer
        white-space: nowrap;
        padding-right: 20px;
        border-right: 1px solid #D5948E;
        display: flex;
        flex-direction: column;
        position: relative

        .first_layer_triangle
            position: absolute;
            top: 5px;
            right: -5px;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 3px 0 3px 5px;
            border-color: transparent transparent transparent #d6655f;
            transition: top 0.4s ease-in-out;
        .active
            color: #D6645F
        &>li
            padding-bottom: 12px
            cursor: pointer
            &:last-child
                padding-bottom: none

            &:hover
                color: #D6645F
    
    .second_layer
        padding-left: 20px
        flex: 1
        &>span
            display: none
        .active
            display: block        
        a
            padding-bottom: 12px
            cursor: pointer
            display: block;
            &:last-child
                padding-bottom: none
            &:hover
                color: #D6645F
        
    
.mobile_menu_active
    display: flex
    transform: translateY(0)
    visibility: visible
    opacity: 1

//+media-query( only screen ,max-width 900px )


//for scroll header css
.scroll_header
    fixed_header()

    .dropdown_block:before
        border-top: 7px solid #fff8f6;
    +#main,+#content
        margin-top: 156px //height of header

    .parent_category
        padding-bottom: 0;
    // position: fixed;
    // width: 100%;
    // z-index: 20;
    // background: #FFF8F6
    // display: flex;
    // // flex-wrap: wrap
    // box-shadow: 0 2px 2px 0 rgba(97,97,97,0.22);
    // //transform: translateY(-($nav_scrolled_height));
    // flex-axis:center


    // .nav_btns_wrapper
    //     color: #D5948E
    // .nav_list_wrapper
    //     flex-direction: row;
    //     height: 45px;
    //     padding: 0;
    //     max-width: $banner_max_width
    //     width: 100%;
    //     justify-content: space-between;

    // #logo_img
    //     width: 125px;
    //     height: 30px;
        
    // .nav_btns_wrapper
    //     display: flex;
    //     line-height: $nav_scrolled_height;

    // .nav_btns
    //     position: initial;
    
    // .child_category_wrapper
    //     margin-top: 15px
    // .scroll_disappear
    //     display: none
.rwd950
    display: none
+media-query( only screen ,max-width 1200px )
    .nav_list_wrapper
        padding-left: 15px
        padding-right: 15px
        
    .scroll_header
        ul.parent_category_list>li:nth-last-child(2) 
            display none
    

+media-query( only screen ,max-width 1100px )
    .scroll_header
        ul.parent_category_list>li:nth-last-child(3) 
            display none

+media-query( only screen ,max-width 950px )
    #header.isRWD
        ul.parent_category_list>li:nth-last-child(2) 
            display none
    .rwd950
        display: list-item
    form.dropdown_block:after
        left: 25px;
        right: 25px;
        bottom: 12px;

    .scroll_header
        rwd_header()

        &.rwd_show
            display: initial
        // .parent_category_list,.nav_btns .fa-heart
        //     display: none

        // .nav_list_wrapper
        //     height: $header_rwd_height
        //     padding: 10px 15px;
        //     box-sizing: border-box;
// +media-query( only screen ,max-width 800px )
//     #header
//         ul.parent_category_list>li:nth-last-child(3)
//             display none

+media-query( only screen ,max-width ($tablet_rwd_width) )
    #header.isRWD
        fixed_header()
        rwd_header()
    .rwd_show
            display: initial
    #main
        margin-top: $header_rwd_height
    
    .nav_btns .fa, .nav_btns i
        font-size: 25px

        //.small_font
    .fa.fa-user-circle-o
        font-size: 24px;
        padding-top: 4px;
        position: relative;
        top: 5px;
        left: -3px;
    
    .fa.fa-shopping-cart
        margin-top: 1px;

    #search_button:before
        font-size: 23px;

    #header_split_line
        width: 1px;
        font-weight: 100;
    
        display: inline-block;
        background: #d5948e;
        height: 27px;
        margin: 0 10px;

    .bars_rwd
        display: inline-block;
    
    .nav_btns.right
        display: flex;
        align-items: center;
    
    .dropdown_block_wrapper>.fa
        padding-bottom: 0;

    .dropdown_block
        width: 100%;
        left: 0;
        top: 31px;
        padding: 0 25px;
        height: 45px;

        &:before
            display: none
    ul.dropdown_block>li
        margin: 0 5px
    
    #shopping_cart
        width: 100%
        top: 31px;
    //#shopping_cart
        
    .mobile_menu
        display: flex